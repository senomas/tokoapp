var Kr=Object.defineProperty,Yr=Object.defineProperties;var Xr=Object.getOwnPropertyDescriptors;var Mt=Object.getOwnPropertySymbols;var Vr=Object.prototype.hasOwnProperty,Qr=Object.prototype.propertyIsEnumerable;var Ft=(r,e,t)=>e in r?Kr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,te=(r,e)=>{for(var t in e||(e={}))Vr.call(e,t)&&Ft(r,t,e[t]);if(Mt)for(var t of Mt(e))Qr.call(e,t)&&Ft(r,t,e[t]);return r},ve=(r,e)=>Yr(r,Xr(e));function N(){}const Ht=r=>r;function ce(r,e){for(const t in e)r[t]=e[t];return r}function Gt(r){return r()}function qt(){return Object.create(null)}function ue(r){r.forEach(Gt)}function De(r){return typeof r=="function"}function Le(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Zr(r){return Object.keys(r).length===0}function rt(r,...e){if(r==null)return N;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function de(r){let e;return rt(r,t=>e=t)(),e}function W(r,e,t){r.$$.on_destroy.push(rt(e,t))}function nt(r,e,t,n){if(r){const s=zt(r,e,t,n);return r[0](s)}}function zt(r,e,t,n){return r[1]&&n?ce(t.ctx.slice(),r[1](n(e))):t.ctx}function st(r,e,t,n){if(r[2]&&n){const s=r[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|s[a];return i}return e.dirty|s}return e.dirty}function it(r,e,t,n,s,i){if(s){const o=zt(e,t,n,i);r.p(o,s)}}function ot(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Be(r){const e={};for(const t in r)t[0]!=="$"&&(e[t]=r[t]);return e}function Me(r,e){const t={};e=new Set(e);for(const n in r)!e.has(n)&&n[0]!=="$"&&(t[n]=r[n]);return t}function Vi(r){return r==null?"":r}const Jt=typeof window!="undefined";let at=Jt?()=>window.performance.now():()=>Date.now(),ct=Jt?r=>requestAnimationFrame(r):N;const fe=new Set;function Wt(r){fe.forEach(e=>{e.c(r)||(fe.delete(e),e.f())}),fe.size!==0&&ct(Wt)}function ut(r){let e;return fe.size===0&&ct(Wt),{promise:new Promise(t=>{fe.add(e={c:r,f:t})}),abort(){fe.delete(e)}}}function Kt(r,e){r.appendChild(e)}function Yt(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function en(r){const e=pe("style");return tn(Yt(r),e),e.sheet}function tn(r,e){Kt(r.head||r,e)}function G(r,e,t){r.insertBefore(e,t||null)}function M(r){r.parentNode.removeChild(r)}function Qi(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function pe(r){return document.createElement(r)}function Zi(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function lt(r){return document.createTextNode(r)}function Fe(){return lt(" ")}function ht(){return lt("")}function rn(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function z(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Xt(r,e){const t=Object.getOwnPropertyDescriptors(r.__proto__);for(const n in e)e[n]==null?r.removeAttribute(n):n==="style"?r.style.cssText=e[n]:n==="__value"?r.value=r[n]=e[n]:t[n]&&t[n].set?r[n]=e[n]:z(r,n,e[n])}function nn(r){return Array.from(r.childNodes)}function sn(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function eo(r,e){r.value=e==null?"":e}function dt(r,e,t,n){t===null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}function to(r,e){for(let t=0;t<r.options.length;t+=1){const n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function ro(r){const e=r.querySelector(":checked")||r.options[0];return e&&e.__value}function Vt(r,e,t=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(r,t,!1,e),n}const He=new Map;let Ge=0;function on(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function an(r,e){const t={stylesheet:en(e),rules:{}};return He.set(r,t),t}function Qt(r,e,t,n,s,i,o,a=0){const u=16.666/n;let c=`{
`;for(let b=0;b<=1;b+=u){const E=e+(t-e)*i(b);c+=b*100+`%{${o(E,1-E)}}
`}const l=c+`100% {${o(t,1-t)}}
}`,d=`__svelte_${on(l)}_${a}`,_=Yt(r),{stylesheet:g,rules:m}=He.get(_)||an(_,r);m[d]||(m[d]=!0,g.insertRule(`@keyframes ${d} ${l}`,g.cssRules.length));const w=r.style.animation||"";return r.style.animation=`${w?`${w}, `:""}${d} ${n}ms linear ${s}ms 1 both`,Ge+=1,d}function ft(r,e){const t=(r.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(r.style.animation=n.join(", "),Ge-=s,Ge||cn())}function cn(){ct(()=>{Ge||(He.forEach(r=>{const{stylesheet:e}=r;let t=e.cssRules.length;for(;t--;)e.deleteRule(t);r.rules={}}),He.clear())})}let be;function we(r){be=r}function Se(){if(!be)throw new Error("Function called outside component initialization");return be}function un(r){Se().$$.on_mount.push(r)}function ln(r){Se().$$.on_destroy.push(r)}function hn(){const r=Se();return(e,t)=>{const n=r.$$.callbacks[e];if(n){const s=Vt(e,t);n.slice().forEach(i=>{i.call(r,s)})}}}function Ee(r,e){Se().$$.context.set(r,e)}function re(r){return Se().$$.context.get(r)}const Te=[],Zt=[],qe=[],pt=[],er=Promise.resolve();let mt=!1;function tr(){mt||(mt=!0,er.then(rr))}function dn(){return tr(),er}function ke(r){qe.push(r)}function no(r){pt.push(r)}const gt=new Set;let ze=0;function rr(){const r=be;do{for(;ze<Te.length;){const e=Te[ze];ze++,we(e),fn(e.$$)}for(we(null),Te.length=0,ze=0;Zt.length;)Zt.pop()();for(let e=0;e<qe.length;e+=1){const t=qe[e];gt.has(t)||(gt.add(t),t())}qe.length=0}while(Te.length);for(;pt.length;)pt.pop()();mt=!1,gt.clear(),we(r)}function fn(r){if(r.fragment!==null){r.update(),ue(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ke)}}let Oe;function nr(){return Oe||(Oe=Promise.resolve(),Oe.then(()=>{Oe=null})),Oe}function Je(r,e,t){r.dispatchEvent(Vt(`${e?"intro":"outro"}${t}`))}const We=new Set;let ne;function _t(){ne={r:0,c:[],p:ne}}function yt(){ne.r||ue(ne.c),ne=ne.p}function q(r,e){r&&r.i&&(We.delete(r),r.i(e))}function K(r,e,t,n){if(r&&r.o){if(We.has(r))return;We.add(r),ne.c.push(()=>{We.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}}const sr={duration:0};function so(r,e,t){let n=e(r,t),s=!1,i,o,a=0;function u(){i&&ft(r,i)}function c(){const{delay:d=0,duration:_=300,easing:g=Ht,tick:m=N,css:w}=n||sr;w&&(i=Qt(r,0,1,_,d,g,w,a++)),m(0,1);const b=at()+d,E=b+_;o&&o.abort(),s=!0,ke(()=>Je(r,!0,"start")),o=ut(j=>{if(s){if(j>=E)return m(1,0),Je(r,!0,"end"),u(),s=!1;if(j>=b){const O=g((j-b)/_);m(O,1-O)}}return s})}let l=!1;return{start(){l||(l=!0,ft(r),De(n)?(n=n(),nr().then(c)):c())},invalidate(){l=!1},end(){s&&(u(),s=!1)}}}function io(r,e,t){let n=e(r,t),s=!0,i;const o=ne;o.r+=1;function a(){const{delay:u=0,duration:c=300,easing:l=Ht,tick:d=N,css:_}=n||sr;_&&(i=Qt(r,1,0,c,u,l,_));const g=at()+u,m=g+c;ke(()=>Je(r,!1,"start")),ut(w=>{if(s){if(w>=m)return d(0,1),Je(r,!1,"end"),--o.r||ue(o.c),!1;if(w>=g){const b=l((w-g)/c);d(1-b,b)}}return s})}return De(n)?nr().then(()=>{n=n(),a()}):a(),{end(u){u&&n.tick&&n.tick(1,0),s&&(i&&ft(r,i),s=!1)}}}function ir(r,e){const t={},n={},s={$$scope:1};let i=r.length;for(;i--;){const o=r[i],a=e[i];if(a){for(const u in o)u in a||(n[u]=1);for(const u in a)s[u]||(t[u]=a[u],s[u]=1);r[i]=a}else for(const u in o)s[u]=1}for(const o in n)o in t||(t[o]=void 0);return t}function or(r){return typeof r=="object"&&r!==null?r:{}}function oo(r,e,t){const n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function vt(r){r&&r.c()}function Ke(r,e,t,n){const{fragment:s,on_mount:i,on_destroy:o,after_update:a}=r.$$;s&&s.m(e,t),n||ke(()=>{const u=i.map(Gt).filter(De);o?o.push(...u):ue(u),r.$$.on_mount=[]}),a.forEach(ke)}function Ye(r,e){const t=r.$$;t.fragment!==null&&(ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function pn(r,e){r.$$.dirty[0]===-1&&(Te.push(r),tr(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function bt(r,e,t,n,s,i,o,a=[-1]){const u=be;we(r);const c=r.$$={fragment:null,ctx:null,props:i,update:N,not_equal:s,bound:qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:qt(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(c.root);let l=!1;if(c.ctx=t?t(r,e.props||{},(d,_,...g)=>{const m=g.length?g[0]:_;return c.ctx&&s(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),l&&pn(r,d)),_}):[],c.update(),l=!0,ue(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=nn(e.target);c.fragment&&c.fragment.l(d),d.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&q(r.$$.fragment),Ke(r,e.target,e.anchor,e.customElement),rr()}we(u)}class wt{$destroy(){Ye(this,1),this.$destroy=N}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Zr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ar=r=>typeof r=="undefined",cr=r=>typeof r=="function",ur=r=>typeof r=="number";function mn(r){return!r.defaultPrevented&&r.button===0&&!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function lr(){let r=0;return()=>r++}function gn(){return Math.random().toString(36).substring(2)}const se=typeof window=="undefined";function hr(r,e,t){return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}const me=[];function _n(r,e){return{subscribe:Y(r,e).subscribe}}function Y(r,e=N){let t;const n=new Set;function s(a){if(Le(r,a)&&(r=a,t)){const u=!me.length;for(const c of n)c[1](),me.push(c,r);if(u){for(let c=0;c<me.length;c+=2)me[c][0](me[c+1]);me.length=0}}}function i(a){s(a(r))}function o(a,u=N){const c=[a,u];return n.add(c),n.size===1&&(t=e(s)||N),a(r),()=>{n.delete(c),n.size===0&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function yn(r,e,t){const n=!Array.isArray(r),s=n?[r]:r,i=e.length<2;return _n(t,o=>{let a=!1;const u=[];let c=0,l=N;const d=()=>{if(c)return;l();const g=e(n?u[0]:u,o);i?o(g):l=De(g)?g:N},_=s.map((g,m)=>rt(g,w=>{u[m]=w,c&=~(1<<m),a&&d()},()=>{c|=1<<m}));return a=!0,d(),function(){ue(_),l()}})}const Re=r=>`@@svnav-ctx__${r}`,St=Re("LOCATION"),ge=Re("ROUTER"),dr=Re("ROUTE"),vn=Re("ROUTE_PARAMS"),bn=Re("FOCUS_ELEM"),fr=/^:(.+)/,Et=(r,e)=>r.substr(0,e.length)===e,wn=r=>r==="",Sn=r=>fr.test(r),pr=r=>r[0]==="*",En=r=>r.replace(/\*.*$/,""),mr=r=>r.replace(/(^\/+|\/+$)/g,"");function X(r,e=!1){const t=mr(r).split("/");return e?t.filter(Boolean):t}const Tt=(r,e)=>r+(e?`?${e}`:""),kt=r=>`/${mr(r)}`;function Ae(...r){const e=n=>X(n,!0).join("/"),t=r.map(e).join("/");return kt(t)}const Ot=1,Xe=2,le=3,Tn=4,gr=5,kn=6,_r=7,On=8,Rn=9,yr=10,vr=11,An={[Ot]:"Link",[Xe]:"Route",[le]:"Router",[Tn]:"useFocus",[gr]:"useLocation",[kn]:"useMatch",[_r]:"useNavigate",[On]:"useParams",[Rn]:"useResolvable",[yr]:"useResolve",[vr]:"navigate"},Rt=r=>An[r];function Pn(r,e){let t;return r===Xe?t=e.path?`path="${e.path}"`:"default":r===Ot?t=`to="${e.to}"`:r===le&&(t=`basepath="${e.basepath||""}"`),`<${Rt(r)} ${t||""} />`}function jn(r,e,t,n){const s=t&&Pn(n||r,t),i=s?`

Occurred in: ${s}`:"",o=Rt(r),a=cr(e)?e(o):e;return`<${o}> ${a}${i}`}const br=r=>(...e)=>r(jn(...e)),wr=br(r=>{throw new Error(r)}),Ve=br(console.warn),Sr=4,xn=3,$n=2,Cn=1,In=1;function Un(r,e){const t=r.default?0:X(r.fullPath).reduce((n,s)=>{let i=n;return i+=Sr,wn(s)?i+=In:Sn(s)?i+=$n:pr(s)?i-=Sr+Cn:i+=xn,i},0);return{route:r,score:t,index:e}}function Nn(r){return r.map(Un).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index)}function Er(r,e){let t,n;const[s]=e.split("?"),i=X(s),o=i[0]==="",a=Nn(r);for(let u=0,c=a.length;u<c;u++){const{route:l}=a[u];let d=!1;const _={},g=E=>ve(te({},l),{params:_,uri:E});if(l.default){n=g(e);continue}const m=X(l.fullPath),w=Math.max(i.length,m.length);let b=0;for(;b<w;b++){const E=m[b],j=i[b];if(!ar(E)&&pr(E)){const k=E==="*"?"*":E.slice(1);_[k]=i.slice(b).map(decodeURIComponent).join("/");break}if(ar(j)){d=!0;break}const O=fr.exec(E);if(O&&!o){const k=decodeURIComponent(j);_[O[1]]=k}else if(E!==j){d=!0;break}}if(!d){t=g(Ae(...i.slice(0,b)));break}}return t||n||null}function Tr(r,e){return Er([r],e)}function Dn(r,e){if(Et(r,"/"))return r;const[t,n]=r.split("?"),[s]=e.split("?"),i=X(t),o=X(s);if(i[0]==="")return Tt(s,n);if(!Et(i[0],".")){const c=o.concat(i).join("/");return Tt((s==="/"?"":"/")+c,n)}const a=o.concat(i),u=[];return a.forEach(c=>{c===".."?u.pop():c!=="."&&u.push(c)}),Tt(`/${u.join("/")}`,n)}function kr(r,e){const{pathname:t,hash:n="",search:s="",state:i}=r,o=X(e,!0),a=X(t,!0);for(;o.length;)o[0]!==a[0]&&wr(le,`Invalid state: All locations must begin with the basepath "${e}", found "${t}"`),o.shift(),a.shift();return{pathname:Ae(...a),hash:n,search:s,state:i}}const Or=r=>r.length===1?"":r;function Rr(r){const e=r.indexOf("?"),t=r.indexOf("#"),n=e!==-1,s=t!==-1,i=s?Or(r.substr(t)):"",o=s?r.substr(0,t):r,a=n?Or(o.substr(e)):"";return{pathname:n?o.substr(0,e):o,search:a,hash:i}}function Ln(r,e,t){return Ae(t,Dn(r,e))}function Bn(r,e){const t=kt(En(r)),n=X(t,!0),s=X(e,!0).slice(0,n.length),i=Tr({fullPath:t},Ae(...s));return i&&i.uri}const At="POP",Mn="PUSH",Fn="REPLACE";function Pt(r){return ve(te({},r.location),{pathname:encodeURI(decodeURI(r.location.pathname)),state:r.history.state,_key:r.history.state&&r.history.state._key||"initial"})}function Hn(r){let e=[],t=Pt(r),n=At;const s=(i=e)=>i.forEach(o=>o({location:t,action:n}));return{get location(){return t},listen(i){e.push(i);const o=()=>{t=Pt(r),n=At,s([i])};s([i]);const a=hr(r,"popstate",o);return()=>{a(),e=e.filter(u=>u!==i)}},navigate(i,o){const{state:a={},replace:u=!1}=o||{};if(n=u?Fn:Mn,ur(i))o&&Ve(vr,"Navigation options (state or replace) are not supported, when passing a number as the first argument to navigate. They are ignored."),n=At,r.history.go(i);else{const c=ve(te({},a),{_key:gn()});try{r.history[u?"replaceState":"pushState"](c,"",i)}catch{r.location[u?"replace":"assign"](i)}}t=Pt(r),s()}}}function jt(r,e){return ve(te({},Rr(e)),{state:r})}function Gn(r="/"){let e=0,t=[jt(null,r)];return{get entries(){return t},get location(){return t[e]},addEventListener(){},removeEventListener(){},history:{get state(){return t[e].state},pushState(n,s,i){e++,t=t.slice(0,e),t.push(jt(n,i))},replaceState(n,s,i){t[e]=jt(n,i)},go(n){const s=e+n;s<0||s>t.length-1||(e=s)}}}}const qn=!!(!se&&window.document&&window.document.createElement),zn=!se&&window.location.origin==="null",Jn=Hn(qn&&!zn?window:Gn());let Q=null,Ar=!0;function Wn(r,e){const t=document.querySelectorAll("[data-svnav-router]");for(let n=0;n<t.length;n++){const s=t[n],i=Number(s.dataset.svnavRouter);if(i===r)return!0;if(i===e)return!1}return!1}function Kn(r){(!Q||r.level>Q.level||r.level===Q.level&&Wn(r.routerId,Q.routerId))&&(Q=r)}function Yn(){Q=null}function Xn(){Ar=!1}function Pr(r){if(!r)return!1;const e="tabindex";try{if(!r.hasAttribute(e)){r.setAttribute(e,"-1");let t;t=hr(r,"blur",()=>{r.removeAttribute(e),t()})}return r.focus(),document.activeElement===r}catch{return!1}}function Vn(r,e){return Number(r.dataset.svnavRouteEnd)===e}function Qn(r){return/^H[1-6]$/i.test(r.tagName)}function jr(r,e=document){return e.querySelector(r)}function Zn(r){let t=jr(`[data-svnav-route-start="${r}"]`).nextElementSibling;for(;!Vn(t,r);){if(Qn(t))return t;const n=jr("h1,h2,h3,h4,h5,h6",t);if(n)return n;t=t.nextElementSibling}return null}function es(r){Promise.resolve(de(r.focusElement)).then(e=>{const t=e||Zn(r.id);t||Ve(le,`Could not find an element to focus. You should always render a header for accessibility reasons, or set a custom focus element via the "useFocus" hook. If you don't want this Route or Router to manage focus, pass "primary={false}" to it.`,r,Xe),!Pr(t)&&Pr(document.documentElement)})}const ts=(r,e,t)=>(n,s)=>dn().then(()=>{if(!Q||Ar){Xn();return}if(n&&es(Q.route),r.announcements&&s){const{path:i,fullPath:o,meta:a,params:u,uri:c}=Q.route,l=r.createAnnouncement({path:i,fullPath:o,meta:a,params:u,uri:c},de(t));Promise.resolve(l).then(d=>{e.set(d)})}Yn()}),rs="position:fixed;top:-1px;left:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;";function ns(r){let e,t;return{c(){e=pe("div"),t=lt(r[0]),z(e,"role","status"),z(e,"aria-atomic","true"),z(e,"aria-live","polite"),z(e,"style",rs)},m(n,s){G(n,e,s),Kt(e,t)},p(n,s){s[0]&1&&sn(t,n[0])},d(n){n&&M(e)}}}function ss(r){let e,t,n,s,i;const o=r[20].default,a=nt(o,r,r[19],null);let u=r[2]&&r[4]&&r[1].announcements&&ns(r);return{c(){e=pe("div"),t=Fe(),a&&a.c(),n=Fe(),u&&u.c(),s=ht(),dt(e,"display","none"),z(e,"aria-hidden","true"),z(e,"data-svnav-router",r[3])},m(c,l){G(c,e,l),G(c,t,l),a&&a.m(c,l),G(c,n,l),u&&u.m(c,l),G(c,s,l),i=!0},p(c,l){a&&a.p&&(!i||l[0]&524288)&&it(a,o,c,c[19],i?st(o,c[19],l,null):ot(c[19]),null),c[2]&&c[4]&&c[1].announcements&&u.p(c,l)},i(c){i||(q(a,c),i=!0)},o(c){K(a,c),i=!1},d(c){c&&M(e),c&&M(t),a&&a.d(c),c&&M(n),u&&u.d(c),c&&M(s)}}}const is=lr(),xr="/";function os(r,e,t){let n,s,i,o,a,{$$slots:u={},$$scope:c}=e,{basepath:l=xr}=e,{url:d=null}=e,{history:_=Jn}=e,{primary:g=!0}=e,{a11y:m={}}=e;const w=te({createAnnouncement:p=>`Navigated to ${p.uri}`,announcements:!0},m),b=l,E=kt(l),j=re(St),O=re(ge),k=!j,L=is(),S=g&&!(O&&!O.manageFocus),$=Y("");W(r,$,p=>t(0,a=p));const A=Y([]);W(r,A,p=>t(18,o=p));const B=Y(null);W(r,B,p=>t(16,s=p));let ee=!1;const v=k?0:O.level+1,C=k?Y((()=>kr(se?Rr(d):_.location,E))()):j;W(r,C,p=>t(15,n=p));const h=Y(n);W(r,h,p=>t(17,i=p));const f=ts(w,$,C),y=p=>I=>I.filter(U=>U.id!==p);function x(p){if(se){if(ee)return;const I=Tr(p,n.pathname);if(I)return ee=!0,I}else A.update(I=>{const U=y(p.id)(I);return U.push(p),U})}function P(p){A.update(y(p))}return!k&&l!==xr&&Ve(le,'Only top-level Routers can have a "basepath" prop. It is ignored.',{basepath:l}),k&&(un(()=>_.listen(I=>{const U=kr(I.location,E);h.set(n),C.set(U)})),Ee(St,C)),Ee(ge,{activeRoute:B,registerRoute:x,unregisterRoute:P,manageFocus:S,level:v,id:L,history:k?_:O.history,basepath:k?E:O.basepath}),r.$$set=p=>{"basepath"in p&&t(10,l=p.basepath),"url"in p&&t(11,d=p.url),"history"in p&&t(12,_=p.history),"primary"in p&&t(13,g=p.primary),"a11y"in p&&t(14,m=p.a11y),"$$scope"in p&&t(19,c=p.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&1024&&l!==b&&Ve(le,'You cannot change the "basepath" prop. It is ignored.'),r.$$.dirty[0]&294912){const p=Er(o,n.pathname);B.set(p)}if(r.$$.dirty[0]&163840&&k){const p=!!n.hash,I=!p&&S,U=!p||n.pathname!==i.pathname;f(I,U)}r.$$.dirty[0]&65536&&S&&s&&s.primary&&Kn({level:v,routerId:L,route:s})},[a,w,k,L,S,$,A,B,C,h,l,d,_,g,m,n,s,i,o,c,u]}class as extends wt{constructor(e){super();bt(this,e,os,ss,Le,{basepath:10,url:11,history:12,primary:13,a11y:14},null,[-1,-1])}}function Pe(r,e,t=ge,n=le){re(t)||wr(r,i=>`You cannot use ${i} outside of a ${Rt(n)}.`,e)}const cs=r=>{const{subscribe:e}=re(r);return{subscribe:e}};function $r(){return Pe(gr),cs(St)}function Cr(){const{history:r}=re(ge);return r}function Ir(){const r=re(dr);return r?yn(r,e=>e.base):Y("/")}function Ur(){Pe(yr);const r=Ir(),{basepath:e}=re(ge);return n=>Ln(n,de(r),e)}function us(){Pe(_r);const r=Ur(),{navigate:e}=Cr();return(n,s)=>{const i=ur(n)?n:r(n);return e(i,s)}}const ls=r=>({params:r&16,location:r&8}),Nr=r=>({params:se?de(r[9]):r[4],location:r[3],navigate:r[10]});function Dr(r){let e,t;return e=new as({props:{primary:r[1],$$slots:{default:[fs]},$$scope:{ctx:r}}}),{c(){vt(e.$$.fragment)},m(n,s){Ke(e,n,s),t=!0},p(n,s){const i={};s&2&&(i.primary=n[1]),s&264217&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){Ye(e,n)}}}function hs(r){let e;const t=r[17].default,n=nt(t,r,r[18],Nr);return{c(){n&&n.c()},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&262168)&&it(n,t,s,s[18],e?st(t,s[18],i,ls):ot(s[18]),Nr)},i(s){e||(q(n,s),e=!0)},o(s){K(n,s),e=!1},d(s){n&&n.d(s)}}}function ds(r){let e,t,n;const s=[{location:r[3]},{navigate:r[10]},se?de(r[9]):r[4],r[11]];var i=r[0];function o(a){let u={};for(let c=0;c<s.length;c+=1)u=ce(u,s[c]);return{props:u}}return i&&(e=new i(o())),{c(){e&&vt(e.$$.fragment),t=ht()},m(a,u){e&&Ke(e,a,u),G(a,t,u),n=!0},p(a,u){const c=u&3608?ir(s,[u&8&&{location:a[3]},u&1024&&{navigate:a[10]},u&528&&or(se?de(a[9]):a[4]),u&2048&&or(a[11])]):{};if(i!==(i=a[0])){if(e){_t();const l=e;K(l.$$.fragment,1,0,()=>{Ye(l,1)}),yt()}i?(e=new i(o()),vt(e.$$.fragment),q(e.$$.fragment,1),Ke(e,t.parentNode,t)):e=null}else i&&e.$set(c)},i(a){n||(e&&q(e.$$.fragment,a),n=!0)},o(a){e&&K(e.$$.fragment,a),n=!1},d(a){a&&M(t),e&&Ye(e,a)}}}function fs(r){let e,t,n,s;const i=[ds,hs],o=[];function a(u,c){return u[0]!==null?0:1}return e=a(r),t=o[e]=i[e](r),{c(){t.c(),n=ht()},m(u,c){o[e].m(u,c),G(u,n,c),s=!0},p(u,c){let l=e;e=a(u),e===l?o[e].p(u,c):(_t(),K(o[l],1,1,()=>{o[l]=null}),yt(),t=o[e],t?t.p(u,c):(t=o[e]=i[e](u),t.c()),q(t,1),t.m(n.parentNode,n))},i(u){s||(q(t),s=!0)},o(u){K(t),s=!1},d(u){o[e].d(u),u&&M(n)}}}function ps(r){let e,t,n,s,i,o=r[2]&&Dr(r);return{c(){e=pe("div"),t=Fe(),o&&o.c(),n=Fe(),s=pe("div"),dt(e,"display","none"),z(e,"aria-hidden","true"),z(e,"data-svnav-route-start",r[5]),dt(s,"display","none"),z(s,"aria-hidden","true"),z(s,"data-svnav-route-end",r[5])},m(a,u){G(a,e,u),G(a,t,u),o&&o.m(a,u),G(a,n,u),G(a,s,u),i=!0},p(a,[u]){a[2]?o?(o.p(a,u),u&4&&q(o,1)):(o=Dr(a),o.c(),q(o,1),o.m(n.parentNode,n)):o&&(_t(),K(o,1,1,()=>{o=null}),yt())},i(a){i||(q(o),i=!0)},o(a){K(o),i=!1},d(a){a&&M(e),a&&M(t),o&&o.d(a),a&&M(n),a&&M(s)}}}const ms=lr();function gs(r,e,t){let n;const s=["path","component","meta","primary"];let i=Me(e,s),o,a,u,c,{$$slots:l={},$$scope:d}=e,{path:_=""}=e,{component:g=null}=e,{meta:m={}}=e,{primary:w=!0}=e;Pe(Xe,e);const b=ms(),{registerRoute:E,unregisterRoute:j,activeRoute:O}=re(ge);W(r,O,v=>t(15,o=v));const k=Ir();W(r,k,v=>t(16,u=v));const L=$r();W(r,L,v=>t(3,a=v));const S=Y(null);let $;const A=Y(),B=Y({});W(r,B,v=>t(4,c=v)),Ee(dr,A),Ee(vn,B),Ee(bn,S);const ee=us();return se||ln(()=>j(b)),r.$$set=v=>{t(23,e=ce(ce({},e),Be(v))),t(11,i=Me(e,s)),"path"in v&&t(12,_=v.path),"component"in v&&t(0,g=v.component),"meta"in v&&t(13,m=v.meta),"primary"in v&&t(1,w=v.primary),"$$scope"in v&&t(18,d=v.$$scope)},r.$$.update=()=>{if(r.$$.dirty&77834){const v=_==="",V=Ae(u,_),C={id:b,path:_,meta:m,default:v,fullPath:v?"":V,base:v?u:Bn(V,a.pathname),primary:w,focusElement:S};A.set(C),t(14,$=E(C))}if(r.$$.dirty&49152&&t(2,n=!!($||o&&o.id===b)),r.$$.dirty&49156&&n){const{params:v}=$||o;B.set(v)}},e=Be(e),[g,w,n,a,c,b,O,k,L,B,ee,i,_,m,$,o,u,l,d]}class ao extends wt{constructor(e){super();bt(this,e,gs,ps,Le,{path:12,component:0,meta:13,primary:1})}}function _s(r){let e,t,n,s;const i=r[13].default,o=nt(i,r,r[12],null);let a=[{href:r[0]},r[2],r[1]],u={};for(let c=0;c<a.length;c+=1)u=ce(u,a[c]);return{c(){e=pe("a"),o&&o.c(),Xt(e,u)},m(c,l){G(c,e,l),o&&o.m(e,null),t=!0,n||(s=rn(e,"click",r[4]),n=!0)},p(c,[l]){o&&o.p&&(!t||l&4096)&&it(o,i,c,c[12],t?st(i,c[12],l,null):ot(c[12]),null),Xt(e,u=ir(a,[(!t||l&1)&&{href:c[0]},l&4&&c[2],l&2&&c[1]]))},i(c){t||(q(o,c),t=!0)},o(c){K(o,c),t=!1},d(c){c&&M(e),o&&o.d(c),n=!1,s()}}}function ys(r,e,t){let n,s,i,o,a;const u=["to","replace","state","getProps"];let c=Me(e,u),l,{$$slots:d={},$$scope:_}=e,{to:g}=e,{replace:m=!1}=e,{state:w={}}=e,{getProps:b=null}=e;Pe(Ot,e);const E=$r();W(r,E,S=>t(11,l=S));const j=hn(),O=Ur(),{navigate:k}=Cr();function L(S){j("click",S),mn(S)&&(S.preventDefault(),k(n,{state:w,replace:i||m}))}return r.$$set=S=>{t(18,e=ce(ce({},e),Be(S))),t(17,c=Me(e,u)),"to"in S&&t(5,g=S.to),"replace"in S&&t(6,m=S.replace),"state"in S&&t(7,w=S.state),"getProps"in S&&t(8,b=S.getProps),"$$scope"in S&&t(12,_=S.$$scope)},r.$$.update=()=>{r.$$.dirty&2080&&t(0,n=O(g,l)),r.$$.dirty&2049&&t(10,s=Et(l.pathname,n)),r.$$.dirty&2049&&t(9,i=n===l.pathname),r.$$.dirty&512&&t(2,o=i?{"aria-current":"page"}:{}),t(1,a=(()=>{if(cr(b)){const S=b({location:l,href:n,isPartiallyCurrent:s,isCurrent:i});return te(te({},c),S)}return c})())},e=Be(e),[n,a,o,E,L,g,m,w,b,i,s,l,_,d]}class co extends wt{constructor(e){super();bt(this,e,ys,_s,Le,{to:5,replace:6,state:7,getProps:8})}}const vs="1.30.0",Lr={"X-Client-Info":`supabase-js/${vs}`},bs="supabase.auth.token";function ws(r){return r.replace(/\/$/,"")}const Ss=()=>typeof window!="undefined";var Es=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ts(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xt={exports:{}};(function(r,e){var t=typeof self!="undefined"?self:Es,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function u(h){return h&&DataView.prototype.isPrototypeOf(h)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(h){return h&&c.indexOf(Object.prototype.toString.call(h))>-1};function d(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function _(h){return typeof h!="string"&&(h=String(h)),h}function g(h){var f={next:function(){var y=h.shift();return{done:y===void 0,value:y}}};return a.iterable&&(f[Symbol.iterator]=function(){return f}),f}function m(h){this.map={},h instanceof m?h.forEach(function(f,y){this.append(y,f)},this):Array.isArray(h)?h.forEach(function(f){this.append(f[0],f[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(f){this.append(f,h[f])},this)}m.prototype.append=function(h,f){h=d(h),f=_(f);var y=this.map[h];this.map[h]=y?y+", "+f:f},m.prototype.delete=function(h){delete this.map[d(h)]},m.prototype.get=function(h){return h=d(h),this.has(h)?this.map[h]:null},m.prototype.has=function(h){return this.map.hasOwnProperty(d(h))},m.prototype.set=function(h,f){this.map[d(h)]=_(f)},m.prototype.forEach=function(h,f){for(var y in this.map)this.map.hasOwnProperty(y)&&h.call(f,this.map[y],y,this)},m.prototype.keys=function(){var h=[];return this.forEach(function(f,y){h.push(y)}),g(h)},m.prototype.values=function(){var h=[];return this.forEach(function(f){h.push(f)}),g(h)},m.prototype.entries=function(){var h=[];return this.forEach(function(f,y){h.push([y,f])}),g(h)},a.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function w(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function b(h){return new Promise(function(f,y){h.onload=function(){f(h.result)},h.onerror=function(){y(h.error)}})}function E(h){var f=new FileReader,y=b(f);return f.readAsArrayBuffer(h),y}function j(h){var f=new FileReader,y=b(f);return f.readAsText(h),y}function O(h){for(var f=new Uint8Array(h),y=new Array(f.length),x=0;x<f.length;x++)y[x]=String.fromCharCode(f[x]);return y.join("")}function k(h){if(h.slice)return h.slice(0);var f=new Uint8Array(h.byteLength);return f.set(new Uint8Array(h)),f.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(h){this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:a.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:a.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():a.arrayBuffer&&a.blob&&u(h)?(this._bodyArrayBuffer=k(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||l(h))?this._bodyArrayBuffer=k(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var h=w(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var h=w(this);if(h)return h;if(this._bodyBlob)return j(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(h){var f=h.toUpperCase();return S.indexOf(f)>-1?f:h}function A(h,f){f=f||{};var y=f.body;if(h instanceof A){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,f.headers||(this.headers=new m(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!y&&h._bodyInit!=null&&(y=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new m(f.headers)),this.method=$(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(y)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function B(h){var f=new FormData;return h.trim().split("&").forEach(function(y){if(y){var x=y.split("="),P=x.shift().replace(/\+/g," "),p=x.join("=").replace(/\+/g," ");f.append(decodeURIComponent(P),decodeURIComponent(p))}}),f}function ee(h){var f=new m,y=h.replace(/\r?\n[\t ]+/g," ");return y.split(/\r?\n/).forEach(function(x){var P=x.split(":"),p=P.shift().trim();if(p){var I=P.join(":").trim();f.append(p,I)}}),f}L.call(A.prototype);function v(h,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new m(f.headers),this.url=f.url||"",this._initBody(h)}L.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},v.error=function(){var h=new v(null,{status:0,statusText:""});return h.type="error",h};var V=[301,302,303,307,308];v.redirect=function(h,f){if(V.indexOf(f)===-1)throw new RangeError("Invalid status code");return new v(null,{status:f,headers:{location:h}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(f,y){this.message=f,this.name=y;var x=Error(f);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function C(h,f){return new Promise(function(y,x){var P=new A(h,f);if(P.signal&&P.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function I(){p.abort()}p.onload=function(){var U={status:p.status,statusText:p.statusText,headers:ee(p.getAllResponseHeaders()||"")};U.url="responseURL"in p?p.responseURL:U.headers.get("X-Request-URL");var tt="response"in p?p.response:p.responseText;y(new v(tt,U))},p.onerror=function(){x(new TypeError("Network request failed"))},p.ontimeout=function(){x(new TypeError("Network request failed"))},p.onabort=function(){x(new o.DOMException("Aborted","AbortError"))},p.open(P.method,P.url,!0),P.credentials==="include"?p.withCredentials=!0:P.credentials==="omit"&&(p.withCredentials=!1),"responseType"in p&&a.blob&&(p.responseType="blob"),P.headers.forEach(function(U,tt){p.setRequestHeader(tt,U)}),P.signal&&(P.signal.addEventListener("abort",I),p.onreadystatechange=function(){p.readyState===4&&P.signal.removeEventListener("abort",I)}),p.send(typeof P._bodyInit=="undefined"?null:P._bodyInit)})}return C.polyfill=!0,i.fetch||(i.fetch=C,i.Headers=m,i.Request=A,i.Response=v),o.Headers=m,o.Request=A,o.Response=v,o.fetch=C,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(xt,xt.exports);var Qe=Ts(xt.exports),je=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const ks=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Os=(r,e)=>{if(typeof r.json!="function")return e(r);r.json().then(t=>e({message:ks(t),status:(r==null?void 0:r.status)||500}))},Rs=(r,e,t)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||(n.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(t)),n};function Ze(r=Qe,e,t,n,s){return je(this,void 0,void 0,function*(){return new Promise((i,o)=>{r(t,Rs(e,n,s)).then(a=>{if(!a.ok)throw a;return(n==null?void 0:n.noResolveJson)?i:a.json()}).then(a=>i(a)).catch(a=>Os(a,o))})})}function $t(r,e,t){return je(this,void 0,void 0,function*(){return Ze(r,"GET",e,t)})}function F(r,e,t,n){return je(this,void 0,void 0,function*(){return Ze(r,"POST",e,n,t)})}function Br(r,e,t,n){return je(this,void 0,void 0,function*(){return Ze(r,"PUT",e,n,t)})}function As(r,e,t,n){return je(this,void 0,void 0,function*(){return Ze(r,"DELETE",e,n,t)})}const Ps="1.22.0",js="http://localhost:9999",xs={"X-Client-Info":`gotrue-js/${Ps}`},xe="supabase.auth.token",$s={name:"sb:token",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};function Cs(r,e,t){const n=t||{},s=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!i.test(r))throw new TypeError("argument name is invalid");const o=s(e);if(o&&!i.test(o))throw new TypeError("argument val is invalid");let a=r+"="+o;if(n.maxAge!=null){const u=n.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(u)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function Is(r){if(!r||!r.headers||!r.headers.host)throw new Error('The "host" request header is not available');const e=r.headers.host.indexOf(":")>-1&&r.headers.host.split(":")[0]||r.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function Us(r,e){var t,n,s;return Cs(r.name,r.value,{maxAge:r.maxAge,expires:new Date(Date.now()+r.maxAge*1e3),httpOnly:!0,secure:e,path:(t=r.path)!==null&&t!==void 0?t:"/",domain:(n=r.domain)!==null&&n!==void 0?n:"",sameSite:(s=r.sameSite)!==null&&s!==void 0?s:"lax"})}function Ns(r,e,t){const n=t.map(i=>Us(i,Is(r))),s=e.getHeader("Set-Cookie");s&&(s instanceof Array?Array.prototype.push.apply(n,s):typeof s=="string"&&n.push(s)),e.setHeader("Set-Cookie",n)}function Mr(r,e,t){Ns(r,e,[t])}function Ds(r,e,t){Mr(r,e,{name:t,value:"",maxAge:-1})}function $e(r){return Math.round(Date.now()/1e3)+r}function Ls(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ie=()=>typeof window!="undefined";function oe(r,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),r=r.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+r+"(=([^&#]*)|&|#|$)"),s=n.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}var R=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};class Bs{constructor({url:e="",headers:t={},cookieOptions:n,fetch:s}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},$s),n),this.fetch=s}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];return(t==null?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(t==null?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),`${this.url}/authorize?${n.join("&")}`}signUpWithEmail(e,t,n={}){return R(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers);let i="";n.redirectTo&&(i="?redirect_to="+encodeURIComponent(n.redirectTo));const o=yield F(this.fetch,`${this.url}/signup${i}`,{email:e,password:t,data:n.data,gotrue_meta_security:{hcaptcha_token:n.captchaToken}},{headers:s}),a=Object.assign({},o);return a.expires_in&&(a.expires_at=$e(o.expires_in)),{data:a,error:null}}catch(s){return{data:null,error:s}}})}signInWithEmail(e,t,n={}){return R(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers);let i="?grant_type=password";n.redirectTo&&(i+="&redirect_to="+encodeURIComponent(n.redirectTo));const o=yield F(this.fetch,`${this.url}/token${i}`,{email:e,password:t},{headers:s}),a=Object.assign({},o);return a.expires_in&&(a.expires_at=$e(o.expires_in)),{data:a,error:null}}catch(s){return{data:null,error:s}}})}signUpWithPhone(e,t,n={}){return R(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers),i=yield F(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:n.data,gotrue_meta_security:{hcaptcha_token:n.captchaToken}},{headers:s}),o=Object.assign({},i);return o.expires_in&&(o.expires_at=$e(i.expires_in)),{data:o,error:null}}catch(s){return{data:null,error:s}}})}signInWithPhone(e,t){return R(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),s="?grant_type=password",i=yield F(this.fetch,`${this.url}/token${s}`,{phone:e,password:t},{headers:n}),o=Object.assign({},i);return o.expires_in&&(o.expires_at=$e(i.expires_in)),{data:o,error:null}}catch(n){return{data:null,error:n}}})}sendMagicLinkEmail(e,t={}){return R(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield F(this.fetch,`${this.url}/magiclink${s}`,{email:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}sendMobileOTP(e,t={}){return R(this,void 0,void 0,function*(){try{let n=Object.assign({},this.headers);return{data:yield F(this.fetch,`${this.url}/otp`,{phone:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}signOut(e){return R(this,void 0,void 0,function*(){try{return yield F(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,n={}){return R(this,void 0,void 0,function*(){try{const s=Object.assign({},this.headers);return{data:yield F(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:n.redirectTo},{headers:s}),error:null}}catch(s){return{data:null,error:s}}})}inviteUserByEmail(e,t={}){return R(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield F(this.fetch,`${this.url}/invite${s}`,{email:e,data:t.data},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}resetPasswordForEmail(e,t={}){return R(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let s="";return t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield F(this.fetch,`${this.url}/recover${s}`,{email:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}refreshAccessToken(e){return R(this,void 0,void 0,function*(){try{const t=yield F(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),n=Object.assign({},t);return n.expires_in&&(n.expires_at=$e(t.expires_in)),{data:n,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){var n;e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:s,session:i}=e.body;if(!s)throw new Error("Auth event missing!");if(s==="SIGNED_IN"){if(!i)throw new Error("Auth session missing!");Mr(e,t,{name:this.cookieName(),value:i.access_token,domain:this.cookieOptions.domain,maxAge:(n=this.cookieOptions.lifetime)!==null&&n!==void 0?n:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite})}s==="SIGNED_OUT"&&Ds(e,t,this.cookieName()),t.status(200).json({})}generateLink(e,t,n={}){return R(this,void 0,void 0,function*(){try{return{data:yield F(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:n.password,data:n.data,redirect_to:n.redirectTo},{headers:this.headers}),error:null}}catch(s){return{data:null,error:s}}})}createUser(e){return R(this,void 0,void 0,function*(){try{const t=yield F(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return R(this,void 0,void 0,function*(){try{return{data:(yield $t(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return R(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e){return R(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const t=e.cookies[this.cookieName()];if(!t)throw new Error("No cookie found!");const{user:n,error:s}=yield this.getUser(t);if(s)throw s;return{token:t,user:n,data:n,error:null}}catch(t){return{token:null,user:null,data:null,error:t}}})}updateUserById(e,t){return R(this,void 0,void 0,function*(){try{const n=yield Br(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}})}deleteUser(e){return R(this,void 0,void 0,function*(){try{const t=yield As(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return R(this,void 0,void 0,function*(){try{const t=yield $t(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return R(this,void 0,void 0,function*(){try{const n=yield Br(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}})}}function Ms(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}var H=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};Ms();const Fs={url:js,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:xs};class Hs{constructor(e){this.stateChangeEmitters=new Map;const t=Object.assign(Object.assign({},Fs),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new Bs({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),t.detectSessionInUrl&&ie()&&!!oe("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:n})=>{n&&console.error("Error getting session from URL.",n)})}signUp({email:e,password:t,phone:n},s={}){return H(this,void 0,void 0,function*(){try{this._removeSession();const{data:i,error:o}=n&&t?yield this.api.signUpWithPhone(n,t,{data:s.data,captchaToken:s.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:s.redirectTo,data:s.data,captchaToken:s.captchaToken});if(o)throw o;if(!i)throw"An error occurred on sign up.";let a=null,u=null;return i.access_token&&(a=i,u=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(u=i),{user:u,session:a,error:null}}catch(i){return{user:null,session:null,error:i}}})}signIn({email:e,phone:t,password:n,refreshToken:s,provider:i},o={}){return H(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!n){const{error:a}=yield this.api.sendMagicLinkEmail(e,{redirectTo:o.redirectTo,captchaToken:o.captchaToken});return{user:null,session:null,error:a}}if(e&&n)return this._handleEmailSignIn(e,n,{redirectTo:o.redirectTo});if(t&&!n){const{error:a}=yield this.api.sendMobileOTP(t,{captchaToken:o.captchaToken});return{user:null,session:null,error:a}}if(t&&n)return this._handlePhoneSignIn(t,n);if(s){const{error:a}=yield this._callRefreshToken(s);if(a)throw a;return{user:this.currentUser,session:this.currentSession,error:null}}if(i)return this._handleProviderSignIn(i,{redirectTo:o.redirectTo,scopes:o.scopes});throw new Error("You must provide either an email, phone number or a third-party provider.")}catch(a){return{user:null,session:null,error:a}}})}verifyOTP({phone:e,token:t},n={}){return H(this,void 0,void 0,function*(){try{this._removeSession();const{data:s,error:i}=yield this.api.verifyMobileOTP(e,t,n);if(i)throw i;if(!s)throw"An error occurred on token verification.";let o=null,a=null;return s.access_token&&(o=s,a=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),s.id&&(a=s),{user:a,session:o,error:null}}catch(s){return{user:null,session:null,error:s}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return H(this,void 0,void 0,function*(){try{if(!((e=this.currentSession)===null||e===void 0?void 0:e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return H(this,void 0,void 0,function*(){try{if(!((t=this.currentSession)===null||t===void 0?void 0:t.access_token))throw new Error("Not logged in.");const{user:n,error:s}=yield this.api.updateUser(this.currentSession.access_token,e);if(s)throw s;if(!n)throw Error("Invalid user data.");const i=Object.assign(Object.assign({},this.currentSession),{user:n});return this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED"),{data:n,user:n,error:null}}catch(n){return{data:null,user:null,error:n}}})}setSession(e){return H(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:n}=yield this.api.refreshAccessToken(e);return n?{session:null,error:n}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(t){return{error:t,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:null}),this.currentSession}getSessionFromUrl(e){return H(this,void 0,void 0,function*(){try{if(!ie())throw new Error("No browser detected.");const t=oe("error_description");if(t)throw new Error(t);const n=oe("provider_token"),s=oe("access_token");if(!s)throw new Error("No access_token detected.");const i=oe("expires_in");if(!i)throw new Error("No expires_in detected.");const o=oe("refresh_token");if(!o)throw new Error("No refresh_token detected.");const a=oe("token_type");if(!a)throw new Error("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(i),{user:l,error:d}=yield this.api.getUser(s);if(d)throw d;const _={provider_token:n,access_token:s,expires_in:parseInt(i),expires_at:c,refresh_token:o,token_type:a,user:l};if(e==null?void 0:e.storeSession){this._saveSession(_);const g=oe("type");this._notifyAllSubscribers("SIGNED_IN"),g==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:_,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return H(this,void 0,void 0,function*(){const t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:n}=yield this.api.signOut(t);if(n)return{error:n}}return{error:null}})}onAuthStateChange(e){try{const t=Ls(),n={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),{data:n,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,n={}){var s,i;return H(this,void 0,void 0,function*(){try{const{data:o,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:n.redirectTo});return a||!o?{data:null,user:null,session:null,error:a}:((((s=o==null?void 0:o.user)===null||s===void 0?void 0:s.confirmed_at)||((i=o==null?void 0:o.user)===null||i===void 0?void 0:i.email_confirmed_at))&&(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),{data:o,user:o.user,session:o,error:null})}catch(o){return{data:null,user:null,session:null,error:o}}})}_handlePhoneSignIn(e,t){var n;return H(this,void 0,void 0,function*(){try{const{data:s,error:i}=yield this.api.signInWithPhone(e,t);return i||!s?{data:null,user:null,session:null,error:i}:(((n=s==null?void 0:s.user)===null||n===void 0?void 0:n.phone_confirmed_at)&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),{data:s,user:s.user,session:s,error:null})}catch(s){return{data:null,user:null,session:null,error:s}}})}_handleProviderSignIn(e,t={}){const n=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes});try{return ie()&&(window.location.href=n),{provider:e,url:n,data:null,session:null,user:null,error:null}}catch(s){return n?{provider:e,url:n,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:s}}}_recoverSession(){var e;try{const t=ie()&&((e=this.localStorage)===null||e===void 0?void 0:e.getItem(xe));if(!t||typeof t!="string")return null;const n=JSON.parse(t),{currentSession:s,expiresAt:i}=n,o=Math.round(Date.now()/1e3);i>=o&&(s==null?void 0:s.user)&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN"))}catch(t){console.log("error",t)}}_recoverAndRefresh(){return H(this,void 0,void 0,function*(){try{const e=ie()&&(yield this.localStorage.getItem(xe));if(!e)return null;const t=JSON.parse(e),{currentSession:n,expiresAt:s}=t,i=Math.round(Date.now()/1e3);if(s<i)if(this.autoRefreshToken&&n.refresh_token){const{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.log(o.message),yield this._removeSession())}else this._removeSession();else!n||!n.user?(console.log("Current session is missing data."),this._removeSession()):(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),H(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:n,error:s}=yield this.api.refreshAccessToken(e);if(s)throw s;if(!n)throw Error("Invalid session data.");return this._saveSession(n),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:n,error:null}}catch(n){return{data:null,error:n}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const n=Math.round(Date.now()/1e3),s=t-n,i=s>60?60:.5;this._startAutoRefreshToken((s-i)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};ie()&&this.localStorage.setItem(xe,JSON.stringify(t))}_removeSession(){return H(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),ie()&&(yield this.localStorage.removeItem(xe))})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>this._callRefreshToken(),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!ie()||!(window==null?void 0:window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===xe){const n=JSON.parse(String(e.newValue));((t=n==null?void 0:n.currentSession)===null||t===void 0?void 0:t.access_token)?(this._recoverAndRefresh(),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}}class Gs extends Hs{constructor(e){super(e)}}var qs=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};class Ct{constructor(e){this.shouldThrowOnError=!1,Object.assign(this,e),this.fetch=e.fetch||Qe}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){typeof this.schema=="undefined"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let n=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>qs(this,void 0,void 0,function*(){var i,o,a;let u=null,c=null,l=null;if(s.ok){const _=(i=this.headers.Prefer)===null||i===void 0?void 0:i.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!_){const w=yield s.text();w&&(this.headers.Accept==="text/csv"?c=w:c=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&m&&m.length>1&&(l=parseInt(m[1]))}else{const _=yield s.text();try{u=JSON.parse(_)}catch{u={message:_}}if(u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:l,status:s.status,statusText:s.statusText,body:c}}));return this.shouldThrowOnError||(n=n.catch(s=>({error:{message:`FetchError: ${s.message}`,details:"",hint:"",code:s.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),n.then(e,t)}}class It extends Ct{select(e="*"){let t=!1;const n=e.split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this}order(e,{ascending:t=!0,nullsFirst:n=!1,foreignTable:s}={}){const i=typeof s=="undefined"?"order":`${s}.order`,o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}.${n?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t=="undefined"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const s=typeof n=="undefined"?"offset":`${n}.offset`,i=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){this.headers.Accept="application/vnd.pgrst.object+json";const e=new It(this);return e.then=(t,n)=>this.then(s=>{var i,o;return((o=(i=s.error)===null||i===void 0?void 0:i.details)===null||o===void 0?void 0:o.includes("Results contain 0 rows"))?t({error:null,data:null,count:s.count,status:200,statusText:"OK",body:null}):t(s)},n),e}csv(){return this.headers.Accept="text/csv",this}}class _e extends It{constructor(){super(...arguments);this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,n){return this.url.searchParams.append(`${e}`,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=typeof t=="undefined"?"or":`${t}.or`;return this.url.searchParams.append(n,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const n=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s=null}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(`${e}`,`${i}fts${o}.${t}`),this}fts(e,t,{config:n}={}){const s=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`fts${s}.${t}`),this}plfts(e,t,{config:n}={}){const s=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`plfts${s}.${t}`),this}phfts(e,t,{config:n}={}){const s=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`phfts${s}.${t}`),this}wfts(e,t,{config:n}={}){const s=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`wfts${s}.${t}`),this}filter(e,t,n){return this.url.searchParams.append(`${e}`,`${t}.${n}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}}class Fr extends Ct{constructor(e,{headers:t={},schema:n,fetch:s}={}){super({fetch:s});this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}select(e="*",{head:t=!1,count:n=null}={}){this.method="GET";let s=!1;const i=e.split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),t&&(this.method="HEAD"),new _e(this)}insert(e,{upsert:t=!1,onConflict:n,returning:s="representation",count:i=null}={}){this.method="POST";const o=[`return=${s}`];if(t&&o.push("resolution=merge-duplicates"),t&&n!==void 0&&this.url.searchParams.set("on_conflict",n),this.body=e,i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new _e(this)}upsert(e,{onConflict:t,returning:n="representation",count:s=null,ignoreDuplicates:i=!1}={}){this.method="POST";const o=[`resolution=${i?"ignore":"merge"}-duplicates`,`return=${n}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new _e(this)}update(e,{returning:t="representation",count:n=null}={}){this.method="PATCH";const s=[`return=${t}`];return this.body=e,n&&s.push(`count=${n}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new _e(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const n=[`return=${e}`];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new _e(this)}}class zs extends Ct{constructor(e,{headers:t={},schema:n,fetch:s}={}){super({fetch:s});this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}rpc(e,{head:t=!1,count:n=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([s,i])=>{this.url.searchParams.append(s,i)})):(this.method="POST",this.body=e),n&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${n}`:this.headers.Prefer=`count=${n}`),new _e(this)}}const Js="0.36.0",Ws={"X-Client-Info":`postgrest-js/${Js}`};class Ks{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ws),t),this.schema=n,this.fetch=s}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new Fr(t,{headers:this.headers,schema:this.schema,fetch:this.fetch})}rpc(e,t,{head:n=!1,count:s=null}={}){const i=`${this.url}/rpc/${e}`;return new zs(i,{headers:this.headers,schema:this.schema,fetch:this.fetch}).rpc(t,{head:n,count:s})}}var T;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(T||(T={}));const Hr=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ys(o,r,e,s),i),{})},Ys=(r,e,t,n)=>{const s=e.find(a=>a.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?Gr(i,o):Ut(o)},Gr=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Zs(e,t)}switch(r){case T.bool:return Xs(e);case T.float4:case T.float8:case T.int2:case T.int4:case T.int8:case T.numeric:case T.oid:return Vs(e);case T.json:case T.jsonb:return Qs(e);case T.timestamp:return ei(e);case T.abstime:case T.date:case T.daterange:case T.int4range:case T.int8range:case T.money:case T.reltime:case T.text:case T.time:case T.timestamptz:case T.timetz:case T.tsrange:case T.tstzrange:return Ut(e);default:return Ut(e)}},Ut=r=>r,Xs=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Vs=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Qs=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Zs=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Gr(e,a))}return r},ei=r=>typeof r=="string"?r.replace(" ","T"):r,ti="1.3.5",ri={"X-Client-Info":`realtime-js/${ti}`},ni="1.0.0",qr=1e4,si=1e3;var Ce;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ce||(Ce={}));var D;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(D||(D={}));var J;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(J||(J={}));var Nt;(function(r){r.websocket="websocket"})(Nt||(Nt={}));class zr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Dt{constructor(e,t,n={},s=qr){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class ii{constructor(e,t={},n){this.topic=e,this.params=t,this.socket=n,this.bindings=[],this.state=D.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new Dt(this,J.join,this.params,this.timeout),this.rejoinTimer=new zr(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=D.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=D.closed,this.socket.remove(this)}),this.onError(s=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=D.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=D.errored,this.rejoinTimer.scheduleTimeout())}),this.on(J.reply,(s,i)=>{this.trigger(this.replyEventName(i),s)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(J.close,e)}onError(e){this.on(J.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Dt(this,e,t,n);return this.canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=D.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(J.close,"leave",this.joinRef())};this.joinPush.destroy();let n=new Dt(this,J.leave,{},e);return n.receive("ok",()=>t()).receive("timeout",()=>t()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=D.joining,this.joinPush.resend(e))}trigger(e,t,n){let{close:s,error:i,leave:o,join:a}=J;if(n&&[s,i,o,a].indexOf(e)>=0&&n!==this.joinRef())return;let c=this.onMessage(e,t,n);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(l=>l.event==="*"?e===(t==null?void 0:t.type):l.event===e).map(l=>l.callback(c,n))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===D.closed}isErrored(){return this.state===D.errored}isJoined(){return this.state===D.joined}isJoining(){return this.state===D.joining}isLeaving(){return this.state===D.leaving}}const oi="websocket",ai="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",ci=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],ui="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",li=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],hi="1.0.34",di={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},fi="https://github.com/theturtle32/WebSocket-Node",pi={node:">=4.0.0"},mi={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},gi={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},_i={verbose:!1},yi={test:"tape test/unit/*.js",gulp:"gulp"},vi="index",bi={lib:"./lib"},wi="lib/browser.js",Si="Apache-2.0";var Ei={name:oi,description:ai,keywords:ci,author:ui,contributors:li,version:hi,repository:di,homepage:fi,engines:pi,dependencies:mi,devDependencies:gi,config:_i,scripts:yi,main:vi,directories:bi,browser:wi,license:Si},Ti=Ei.version,he;if(typeof globalThis=="object")he=globalThis;else try{he=require("es5-ext/global")}catch{}finally{if(!he&&typeof window!="undefined"&&(he=window),!he)throw new Error("Could not determine global this")}var Ie=he.WebSocket||he.MozWebSocket,ki=Ti;function Jr(r,e){var t;return e?t=new Ie(r,e):t=new Ie(r),t}Ie&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(Jr,r,{get:function(){return Ie[r]}})});var Oi={w3cwebsocket:Ie?Jr:null,version:ki};class Ri{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const u=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:u,payload:c}}}var Ai=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const Pi=()=>{};class ji{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=ri,this.params={},this.timeout=qr,this.transport=Oi.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Pi,this.conn=null,this.sendBuffer=[],this.serializer=new Ri,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${Nt.websocket}`,(t==null?void 0:t.params)&&(this.params=t.params),(t==null?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(t==null?void 0:t.timeout)&&(this.timeout=t.timeout),(t==null?void 0:t.logger)&&(this.logger=t.logger),(t==null?void 0:t.transport)&&(this.transport=t.transport),(t==null?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),(t==null?void 0:t.longpollerTimeout)&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=(t==null?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=(t==null?void 0:t.encode)?t.encode:(n,s)=>s(JSON.stringify(n)),this.decode=(t==null?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zr(()=>Ai(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((n,s)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),n({error:null,data:!0})}catch(i){n({error:i,data:!1})}})}log(e,t,n){this.logger(e,t,n)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case Ce.connecting:return"connecting";case Ce.open:return"open";case Ce.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){let n=new ii(e,t,this);return this.channels.push(n),n}push(e){let{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef?this.pendingHeartbeatRef=null:s===(i==null?void 0:i.type)&&this._resetHeartbeat(),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a.isMember(n)).forEach(a=>a.trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ni}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e;try{this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(J.access_token,{access_token:e})})}catch(t){console.log("setAuth error",t)}}leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n.isJoined()||n.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this._resetHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(J.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_resetHeartbeat(){this.pendingHeartbeatRef=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs)}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(si,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class xi{constructor(e,t,n,s){const i={},o=s==="*"?`realtime:${n}`:`realtime:${n}:${s}`,a=t.Authorization.split(" ")[1];a&&(i.user_token=a),this.subscription=e.channel(o,i)}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Hr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Hr(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,n=>{let s={schema:n.schema,table:n.table,commit_timestamp:n.commit_timestamp,eventType:n.type,new:{},old:{},errors:n.errors};s=Object.assign(Object.assign({},s),this.getPayloadRecords(n)),t(s)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}}class $i extends Fr{constructor(e,{headers:t={},schema:n,realtime:s,table:i,fetch:o}){super(e,{headers:t,schema:n,fetch:o});this._subscription=null,this._realtime=s,this._headers=t,this._schema=n,this._table=i}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new xi(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}}var Ue=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const Ci=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ii=(r,e)=>{if(typeof r.json!="function")return e(r);r.json().then(t=>e({message:Ci(t),status:(r==null?void 0:r.status)||500}))},Ui=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};function et(r=Qe,e,t,n,s,i){return Ue(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Ui(e,n,s,i)).then(u=>{if(!u.ok)throw u;return(n==null?void 0:n.noResolveJson)?o(u):u.json()}).then(u=>o(u)).catch(u=>Ii(u,a))})})}function Lt(r,e,t,n){return Ue(this,void 0,void 0,function*(){return et(r,"GET",e,t,n)})}function Ne(r,e,t,n,s){return Ue(this,void 0,void 0,function*(){return et(r,"POST",e,n,s,t)})}function Ni(r,e,t,n,s){return Ue(this,void 0,void 0,function*(){return et(r,"PUT",e,n,s,t)})}function Wr(r,e,t,n,s){return Ue(this,void 0,void 0,function*(){return et(r,"DELETE",e,n,s,t)})}const Di="0.0.0",Li={"X-Client-Info":`storage-js/${Di}`};var ye=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};class Bi{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Li),t),this.fetch=n}listBuckets(){return ye(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Lt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return ye(this,void 0,void 0,function*(){try{return{data:(yield Ne(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(n){return{data:null,error:n}}})}updateBucket(e,t){return ye(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}emptyBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}}var ae=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const Mi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hi{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=s}uploadOrUpdate(e,t,n,s){return ae(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Fi),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob!="undefined"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",n)):typeof FormData!="undefined"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl)):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),l=yield Qe(`${this.url}/object/${c}`,{method:e,body:i,headers:a});if(l.ok)return{data:{Key:c},error:null};{const d=yield l.json();return{data:null,error:d}}}catch(i){return{data:null,error:i}}})}upload(e,t,n){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}update(e,t,n){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return ae(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}createSignedUrl(e,t){return ae(this,void 0,void 0,function*(){try{const n=this._getFinalPath(e);let s=yield Ne(this.fetch,`${this.url}/object/sign/${n}`,{expiresIn:t},{headers:this.headers});const i=`${this.url}${s.signedURL}`;return s={signedURL:i},{data:s,error:null,signedURL:i}}catch(n){return{data:null,error:n,signedURL:null}}})}download(e){return ae(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield Lt(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{const t=this._getFinalPath(e),n=`${this.url}/object/public/${t}`;return{data:{publicURL:n},error:null,publicURL:n}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,n){return ae(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Mi),t),{prefix:e||""});return{data:yield Ne(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){return{data:null,error:s}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}class Gi extends Bi{constructor(e,t={},n){super(e,t,n)}from(e){return new Hi(this.url,this.headers,e,this.fetch)}}var Bt=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const qi={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:Lr};class zi{constructor(e,t,n){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=ws(e),i=Object.assign(Object.assign({},qi),n);this.restUrl=`${s}/rest/v1`,this.realtimeUrl=`${s}/realtime/v1`.replace("http","ws"),this.authUrl=`${s}/auth/v1`,this.storageUrl=`${s}/storage/v1`,this.schema=i.schema,this.multiTab=i.multiTab,this.fetch=i.fetch,this.headers=Object.assign(Object.assign({},Lr),n==null?void 0:n.headers),this.auth=this._initSupabaseAuthClient(i),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},i.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get storage(){return new Gi(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new $i(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch})}rpc(e,t,{head:n=!1,count:s=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:n,count:s})}removeAllSubscriptions(){return Bt(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(s=>this.removeSubscription(s));return(yield Promise.all(t)).map(({error:s},i)=>({data:{subscription:e[i]},error:s}))})}removeSubscription(e){return Bt(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),n=this.getSubscriptions(),s=n.filter(i=>i.isJoined()).length;return n.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:s},error:t}})}_closeSubscription(e){return Bt(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:n}=yield this._unsubscribeSubscription(e);t=n}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",n=>t({error:n})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:s,headers:i,fetch:o}){const a={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gs({url:this.authUrl,headers:Object.assign(Object.assign({},i),a),autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:s,fetch:o})}_initRealtimeClient(e){return new ji(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new Ks(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch})}_getAuthHeaders(){var e,t;const n=this.headers,s=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return n.apikey=this.supabaseKey,n.Authorization=`Bearer ${s}`,n}_listenForMultiTabEvents(){if(!this.multiTab||!Ss()||!(window==null?void 0:window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,n,s;if(e.key===bs){const i=JSON.parse(String(e.newValue)),o=(n=(t=i==null?void 0:i.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0,a=(s=this.auth.session())===null||s===void 0?void 0:s.access_token;o?!a&&o?this._handleTokenChanged("SIGNED_IN",o,"STORAGE"):a!==o&&this._handleTokenChanged("TOKEN_REFRESHED",o,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",o,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,n==null?void 0:n.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),n=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut())}}const uo=(r,e,t)=>new zi(r,e,t);function Ji(r){return r<.5?4*r*r*r:.5*Math.pow(2*r-2,3)+1}var Z={$(r){return typeof r=="string"?document.querySelector(r):r},extend(...r){return Object.assign(...r)},cumulativeOffset(r){let e=0,t=0;do e+=r.offsetTop||0,t+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:e,left:t}},directScroll(r){return r&&r!==document&&r!==document.body},scrollTop(r,e){let t=e!==void 0;return this.directScroll(r)?t?r.scrollTop=e:r.scrollTop:t?document.documentElement.scrollTop=document.body.scrollTop=e:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(r,e){let t=e!==void 0;return this.directScroll(r)?t?r.scrollLeft=e:r.scrollLeft:t?document.documentElement.scrollLeft=document.body.scrollLeft=e:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}};const Wi={container:"body",duration:500,delay:0,offset:0,easing:Ji,onStart:N,onDone:N,onAborting:N,scrollX:!1,scrollY:!0},Ki=r=>{let{offset:e,duration:t,delay:n,easing:s,x:i=0,y:o=0,scrollX:a,scrollY:u,onStart:c,onDone:l,container:d,onAborting:_,element:g}=r;typeof e=="function"&&(e=e());var m=Z.cumulativeOffset(d),w=g?Z.cumulativeOffset(g):{top:o,left:i},b=Z.scrollLeft(d),E=Z.scrollTop(d),j=w.left-m.left+e,O=w.top-m.top+e,k=j-b,L=O-E;let S=!0,$=!1,A=at()+n,B=A+t;function ee(h,f,y){a&&Z.scrollLeft(h,y),u&&Z.scrollTop(h,f)}function v(h){h||($=!0,c(g,{x:i,y:o}))}function V(h){ee(d,E+L*h,b+k*h)}function C(){S=!1}return ut(h=>{if(!$&&h>=A&&v(!1),$&&h>=B&&(V(1),C(),l(g,{x:i,y:o})),!S)return _(g,{x:i,y:o}),!1;if($){const f=h-A,y=0+1*s(f/t);V(y)}return!0}),v(n),V(0),C},Yi=r=>{let e=Z.extend({},Wi,r);return e.container=Z.$(e.container),e.element=Z.$(e.element),e},lo=r=>Ki(Yi(r));export{no as $,Be as A,nt as B,it as C,ot as D,st as E,ir as F,or as G,lo as H,as as I,ln as J,Ji as K,co as L,Zi as M,Vi as N,Qi as O,$r as P,W as Q,ao as R,wt as S,us as T,De as U,Xt as V,ke as W,to as X,ro as Y,Zt as Z,oo as _,Fe as a,so as a0,io as a1,vt as b,uo as c,z as d,pe as e,G as f,Kt as g,K as h,bt as i,M as j,Ye as k,rn as l,Ke as m,lt as n,sn as o,eo as p,N as q,ue as r,Le as s,q as t,ht as u,_t as v,Y as w,yt as x,un as y,ce as z};
